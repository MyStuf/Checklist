<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <script type="text/javascript" src="jquery-1.10.2.min.js"></script>
    <style type="text/css"> @import "css/style.css"; </style>
    <script type="text/javascript" src="tests/Data_list.js"> </script>
    <script type="text/javascript" src="tests/Data_render.js"> </script>
    <title>RF</title>
</head>
<body>

<h1>РФ</h1>

<div id="action3" class="block">
        <h3><label for="target">Цель командировки:</label></h3>
        <!-- можно сделать 3 кнопки - так будет удобнне -->
        <select id="target">
            <option value=""></option>
            <option value="1">Участие в производственном совещании</option>
            <option value="2">Участие в конференции</option>
            <option value="3">Участие в семинаре</option>
        </select>
        <button id="targetButton">Select</button>
        <script type="text/javascript">
            $(function () {
                $("#discript").hide();
                $("#begin").hide();
                $("#Order").hide();
                $("#next").hide();
                $("#checkTarget1").hide();
                $("#checkTarget2").hide();
                $("#choose5").hide();
                $("#targetButton").click(function () {
                    var target = $("#target");

                    if (target.val() === "1") {
                        $("#discript").show();
                        $("#next").show();
                        $("#checkTarget1").show();
                        $(this).prop('disabled', 'disabled');
                    } else {
                        alert("Choose option!!")
                    }
                    return false;
                });
            });
        </script>
</div>

<div id="discript" class="block">
<h3>Условия, которые должны быть соблюдены:</h3>

<div id="checkTarget1"></div>
    <button id="next" value="Second" name="Second" class="next" disabled="disabled">Second</button>
    <script type="text/javascript">
        $(function () {
            $("#choose1").click(function () {
                $(this).attr("disabled", "disabled");
                $("#next").removeAttr("disabled");
                $("#choose3").removeAttr("disabled")
            });
            $("#next").click(function () {
                $("#begin").show();
                $("#Order").show();
                $("#checkTarget2").show();
                $("#choose5").show();
            });
        });
    </script>
</div>
<div id="begin">
    <p>Командировочные документы:</p>
</div>
<div id="Order">
    <h3>Приказ - это .......</h3>
    <h3>Условия:</h3>
    <div id="checkTarget2"></div>
    <script type="text/javascript">
        $(function () {
            $("#kom1").hide();
            $("#deduct").hide();
            $("#non-deduct").hide();
            $("#text1").hide();
            $("#text2").hide();
            $("#fakt").hide();
            $("#per").hide();
        });
    </script>
    <button id="choose5" value="Second" name="Second" disabled="disabled">Second</button>
        <script type="text/javascript">
            $(function () {
                $("#choose5").click(function () {
                    $("#kom1").show();
                });
            });
        </script>
</div>
<div id="kom1">
    <h3>Командировочное удостоверение - это .......</h3>
    <h3>Условия:</h3>
    <div id="checkTarget02"></div>
    <button id="choose8" value="Result" name="Result" disabled="disabled">Result</button>
    <script type="text/javascript">
        $(function () {
            $("#choose8").click(function () {
                $("#deduct").show();
                $("#non-deduct").show();
                $("#text1").show();
        });
        });
    </script>
</div>
<div id="text1">Выберете решение:</div>
<button id="deduct" value="deduct" name="deduct">Deductible</button>
 <script type="text/javascript">
     $("#deduct").click(function() {
         $("#fakt").show();
         $("#per").show();
         $("#text2").show();
         });
 </script>
<button id="non-deduct" value="non-deduct" name="non-deduct">Non-deductible</button>
    <script type="text/javascript">
        $(function(){
            $("#non-deduct").click(function(){
                 alert("sorry this page under construction!!");
        });
            });
    </script>
<div id="text2">Каким образом сотрудник отчитывается:</div>
    <button id="per">Per Diem</button>
    <script type="text/javascript">
        $(function(){
            $("#per").click(function(){
        location.href = "RFDeduct.html"
        });
            });
    </script>
    <button id="fakt">Expenses</button>
<script type="text/javascript">
    $(function(){
        $("#fact").click(function(){
            alert("sorry this page under construction!!");
        });
    });
</script>

<br/>
<br/>
<br/>
<!--
 потеренный закрывающий </div>
 похоже чтото не то со вложенностью элементов.
 стоит это проверить!
 -->


<a href="#" class="test">Показать выбраные значения</a>

<script type="text/javascript">
        ///тут мы радостно забыли $(function() { ... в итоге половина их всего этого просто не будет работать.
        $(function() {
          var handle_1 = Anna.FormRender.renderCheckboxSection($("div#checkTarget1"), Anna.Forms.Data.form3);
          var handle_2 = Anna.FormRender.renderCheckboxSection($("div#checkTarget02"), Anna.Forms.Data.form5);
          var handle_3 = Anna.FormRender.renderCheckboxSection($("div#checkTarget2"), Anna.Forms.Data.form4);
            ///обработчик клика по ссылке нужно регистрировать _1_ раз,
            ///иначе он тебе замучает сообщениями
            $("a.test").click(function(){
                alert(JSON.stringify(
                        ///сложим данные по формам
                        {
                            form_1: handle_1(),
                            form_2: handle_2(),
                            form_3: handle_3()
                        }
                ));
                return false;
            });
        });

</script>
</body>

</html>
